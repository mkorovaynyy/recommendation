@startuml
start
:Запрос рекомендаций;
if (Пользователь найден?) then (да)
  :Получить статические рекомендации;
  :Получить динамические рекомендации;
  while (Для каждого динамического правила) is (Еще правила?)
    if (Правило применено успешно?) then (да)
      :Увеличить счетчик срабатываний;
    else (нет)
    endif
  endwhile
  :Объединить рекомендации;
  :Вернуть результат;
else (нет)
  :Вернуть "Пользователь не найден";
endif
stop
@enduml